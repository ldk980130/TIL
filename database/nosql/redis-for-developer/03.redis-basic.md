# 3장 레디스 기본 개념

## 레디스의 자료 구조

### string

- `string`에는 최대 512MB의 문자열을 저장할 수 있다.
- 모든 종류의 문자열을 binary-safe하게 처리할 수 있다.
    - 이미지 같은 바이트 값, HTTP 응답 등 다양한 데이터를 저장 가능
- `string`은 키와 값이 일대일로 연결되는 유일한 자료 구조
- `SET` 커맨드로 `string` 데이터를 저장하고 `GET`으로 조회한다.

```bash
> SET hello world
ok

> GET hello
"world"
```

- 기존에 값이 있었다면 기존 값은 새 값으로 대체된다.
- `NX` 옵션을 통해 키가 없을 때만 새 키를 저장하도록 할 수 있다.
- 반대로 `XX` 옵션으로 키가 있을 때만 덮어 쓰기를 하고 새로운 키는 생성하지 않도록 할 수 있다.

```bash
> SET hello newal NX
(nil)

> SET hello newal XX
ok

> GET hello
"newal"
```

- `string` 자료구조는 숫자 형태 데이터도 저장할 수 있다.
- `INCR`, `INCRBY` 키워드로 숫자를 원자적으로 조작할 수 있다.
    - 원자적이라는 것은 여러 클라이언트가 경쟁 상태를 발생시킬 일이 없음을 의미

```bash
> SET counter 100
ok

> INCR counter
(integer) 101

> INCRBY counter 50
(integer) 151
```

- `MSET`, `MGET` 커맨드로 여러 키를 한 번에 조작 가능하다.
    - 성능이 중요한 대규모 시스템에서 적절히 사용한다면 네트워크 통신을 줄여 서비스 응답 속도를 전반적으로 올릴 수 있다.

```bash
> MSET a 10 b 20 c 30
ok

> MGET a b c
1) "10"
2) "20"
3) "30"
```
