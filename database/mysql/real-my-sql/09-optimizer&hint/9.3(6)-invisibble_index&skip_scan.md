# 9.3(6) 인비저블 인덱스와 스킵 스캔

## 인비저블 인덱스(use_invisible_indexes)

- 8.0 버전부터 인덱스가 존재하더라도 사용하지 못하게 제어하는 기능을 제공한다.
    - 이전에는 인덱스를 삭제해야만 사용하지 않게 할 수 있었다.

```sql
-- // 옵티마이저가 인덱스를 사용하지 못하게 변경
ALTER TABLE employees ALTER INDEX ix_hiredate INVISIBLE;

-- // 옵티마이저가 인덱스를 사용할 수 있게 변경
ALTER TABLE employees ALTER INDEX ix_hiredate VISIBLE;
```

- `use_invisible_indexes` 옵티마이저 옵션을 이용하면 `INVISIBLE`로 설정된 인덱스도 옵티마이저가 사용할 수 있게할 수 있다.
    - 기본값은 off라서 옵션을 바꾸지 않는한 `INVISIBLE` 인덱스는 사용하지 않는다.

## 스킵 스캔(skip_scan)

- 인덱스 스킵 스캔 최적화를 활성화할지를 아래 코드로 제어할 수 있다.
- 인덱스 스킵 스캔은 인덱스의 선행 칼럼이 조건절에 사용되지 않더라도 후행 칼럼의 조건만으로 인덱스를 이용할 수 있는 최적화이다.
    - 자세한 내용은 8.3.4.4절 ‘인덱스 스킵 스캔’ 참조

```sql
-- // 현제 세션에서 인덱스 스킵 스캔 활성화
SET optimizer_switch='skip_can=on';

-- // 특정 테이블에 대해 인덱스 스킵 스캔을 사용하도록 힌트 사용
SELECT /*+ SKIP_SCAN(employees)*/ COUNT(*)
FROM employees
WHERE birth_date>='1965-02-01';

-- // 특정 테이블에 대해 인덱스 스킵 스캔을 사용하지 않도록 힌트 사용
SELECT /*+ NO_SKIP_SCAN(employees)*/ COUNT(*)
FROM employees
WHERE birth_date>='1965-02-01';
```