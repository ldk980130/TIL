# 08장 분산 시스템의 골칫거리
## 결함과 부분 장애

- 부분 장애(partial failure)
    - 분산 시스템에선 어떤 부분은 잘 동작하지만 다른 부분은 예측할 수 없이 고장날 수도 있다.
    - 부분 장애는 비결정적이다.
    - 네트워크와 관련되어 어떨 때는 동작하지만 어떨 때는 실패한다.

### 클라우드 컴퓨팅과 슈퍼컴퓨팅

- 대규모 컴퓨팅 시스템 구축 방법 종류
    - 고성능 컴퓨팅 분야 - 슈퍼컴퓨터 등으로 계산 비용이 매우 높은 과학 계산 작업에 사용된다.
    - 클라우드 컴퓨팅 - 데이터센터, IP 네트워크로 연결된 상용 컴퓨터 등과 관련돼 있다.
    - 고성능 컴퓨팅과 클라우드 컴퓨팅의 중간 지점인 전통적인 기업형 데이터 센터
- 이 책에선 인터넷 서비스를 구현하는 시스템을 집중적으로 다루며 다음과 같은 특징이 있다.
    - 언제라도 사용자에게 지연이 낮은 서비스를 제공해야 한다.
    - 부분 장애 가능성을 받아들이고 소프트웨어에 내결함성 메커니즘이 필요하다.
    - 지리적으로 분산된 배포를 하기에 통신 대부분이 인터넷을 거친다.
- 분산 시스템에선 의심, 비관주의, 편집증을 가지는 것이 좋다.
    - 발생 가능성이 낮은 결함이더라도 광범위하게 고려하고 테스트할 필요가 있다.

## 신뢰성 없는 네트워크

- 전통적 인터넷 서비스를 위한 분산 시스템은 비공유 시스템이다.
    - 즉 네트워크로 연결된 다수의 장비
    - 상대적으로 저렴하고 지리적으로 분산되어 높은 신뢰성 확보가 가능
- 인터넷과 데이터센터 내부 네트워크 대부분은 비동기 패킷 네트워크이기에 여러 가지가 잘못될 수 있다.
    - 요청이 손실 됐을 수도 있다.
    - 요청이 큐에서 대기하다 나중에 전송될 수 있다.
    - 원격 노드에 장애가 생겼을 수 있다.
    - 원격 노드가 일시적으로 응답하기를 멈췄지만 나중에 다시 응답할 수 있다.
    - 원격 노드가 요청을 처리했지만 응답이 네트워크에서 손실됐을 수 있다.
    - 원격 노드가 요청을 처리했지만 응답이 지연되다 나중에 전송될 수 있다.

### 현실의 네트워크 결함

- 100% 신뢰성 있는 네트워크를 만드는 방법은 아직 없는 듯 하다.
    - EC2 같은 공개 클라우드 서비스는 일시적 네트워크 결함이 자주 발생한다.
    - 비공개 데이터센터는 더 안정적일 순 있지만 네트워크 토폴로지 재구성을 유발하고 패킷이 1분 이상 지연될 수도 있다.
    - 상어가 해저 케이블을 물어뜯어 손상시키기도 한다.
- 네트워크 결함이 드물더라도 일어날 수 있기에 소프트웨어는 이를 처리할 수 있어야 한다.
    - 네트워크 결함을 견디도록 처리하기 보다 사용자에게 오류를 보여주는 것도 타당한 방법이다.
    - 소프트웨어가 네트워크 문제에 반응하여 복구될 수 있도록 보장하는 것이 중요하다.
