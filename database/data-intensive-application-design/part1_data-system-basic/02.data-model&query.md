# 02장 데이터 모델과 질의 언어
- 데이터 모델은 소프트웨어 개발에서 제일 중요한 부분이다.
    - 문제를 어떻게 생각해야 하는지 지대한 영향을 미침
- 대부분의 애플리케이션은 하나의 데이터 모델을 다른 데이터 모델 위에 계층을 둬서 만든다.
    - 개발자는 현실을 보고 객체나 데이터 구조, API를 모델링한다.
    - 데이터 구조 저장 시에는 JSON이나 XML 문서, 관계형 DB 테이블이나 그래프 모델 같은 범용 모델로 표현한다.
    - DB 소프트웨어를 개발하는 엔지니어는 JSON/XML/관계형/그래프 데이터를 메모리나 디스크 또는 네트워크 바이트 단위로 표현하는 방법을 결정한다.
    - 더 낮은 수준에서 하드웨어 엔지니어는 전류, 빛의 파동, 자기장 등 관점에서 바이트를 표현한다.
- 각 계층은 명확한 데이터 모델을 제공해 하위 계층의 복잡성을 숨긴다.
- 하나의 데이터 모델을 완전히 익히는 데도 많은 노력이 필요하다.
    - 애플리케이션에 적합한 데이터 모델을 선택하는 작업은 상당히 중요하다.

## 관계형 모델과 문서 모델

- 오늘날 가장 잘 알려진 데이터 모델은 관계형 모델 기반의 SQL이다.
    - 데이터는 테이블이라 불리는 관계(Relation)로 구성된다.
    - 각 관계는 순서 없는 튜플(tuple) 모음이다.
- 관계형 데이터베이스의 근원은 비즈니스 데이터 처리에 있다.
    - 트랜잭션 처리, 일괄 처리 등
- 오늘날의 대부분의 서비스는 여전히 관계형 데이터베이스를 통해 제공된다.

### NoSQL의 탄생

- NoSQL은 관계형 모델의 우위를 뒤집으려는 가장 최신 시도다.
- NoSQL DB를 채택하는 데 다음과 같은 원동력이 있다.
    - 높은 쓰기 처리량 달성을 관계형 DB보다 쉽게 할 수 있는 뛰어난 확장성 필요
    - 무료 오픈소스 소프트웨어에 대한 선호도 확산
    - 관계형 모델에서 지원하지 않는 특수 질의 동작
    - 관계형 스키마의 제한에 대한 불만과 더욱 동적이고 표현력이 풍부한 데이터 모델에 대한 바람

### 객체 관계형 불일치

- 임피던스 불일치
    - 객체지향 프로그래밍 언어로 개발한 코드와 데이터베이스 모델 사이의 분리
    - 보통 두 모델 사이에 전환계층이 필요해진다.
- 하이버네이트 같은 ORM을 사용해 두 모델 간 차이를 개선할 순 있지만 완벽히 숨길 수는 없다.
    - 관계형 스키마에서 ‘이력서’ 같은 데이터를 표현하기 쉽지 않다.
    - ‘이력서’ 같은 데이터 구조는 모든 내용을 갖추고 있는 문서라 JSON 표현에 매우 적합하다.

### 다대일과 다대다 관계

- 중복된 데이터를 정규화하려면 다대일 관계가 필요하다.
    - 어떤 값을 평문으로 저장하는 것이 아닌 외부 테이블로 두고 ID를 참조
    - 관계형 모델에선 조인이 쉬워 다른 테이블을 참조하는 것이 일반적
    - 문서 모델에는 적합하지 않은 관계
- 데이터베이스 자체가 조인을 지원하지 않으면 애플리케이션 코드에서 조인을 흉내내야 한다.
    - 문서 데이터베이스는 일대다 트리 구조를 위해 조인이 필요하지 않아 조인에 대한 지원이 보통 약하다.
