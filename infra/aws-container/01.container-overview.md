# Chapter 01 컨테이너 개요
## 1-1 컨테이너 기술

### 서버 가상화와 컨테이너

- 컨테이너
    - 다른 프로세스와 격리된 상태로 OS에서 소프트웨어를 실행하는 기술
    - 컨테이너 내 소프트웨어에서 보면 독립된 OS 환경을 점유하고 있는 것처럼 보인다.
    - 게스트 OS별로 커널을 점유하는 서버 가상화와 달리 OS와 커널을 공유하고 프로세스를 분리하는 구조다.

### 컨테이너의 장점

- 환경 의존에서의 해방
    - 애플리케이션 가동에 필요한 런타임과 라이브러리를 한 패키지로 묶음어로써 애플리케이션 의존 관계를 컨테이너 안에 집약할 수 있다.
    - 컨테이너는 의존 존관계가 포함된 패키지가 바로 배포 단위
    - 한 번 빌드한 이미지는 컨테이너의 런타임상에서 동일한 동작을 하기에 라이브러리와 관련된 환경 의존을 고려하지 않아도 된다.
- 환경 구축 및 테스트에 필요한 시간 감소
    - 모든 의존관계가 컨테이너 안에서 완결되므로 애플리케이션 배포나 마이그레이션 업무가 단순해진다.
    - 컨테이너는 로컬, 온프레미스나 퍼블릭 클라우드에서 동일하게 동작한다.
- 자원 효율
    - 컨테이너는 게스트 OS와 하드웨어 에뮬레이트를 하지 않아도 되기에 서버 가상화에 비해 컴퓨팅 자원의 소비가 적다.
    - 프로세스 단위로 동작하기에 애플리케이션의 기동도 빠르다.

## 1-2 도커란

### 도커 개요

- 도커란 컨테이너 라이프사이클을 관리하기 위한 플랫폼이다.
    - 도커사의 슬로건: ‘Build, Ship, Run’
- Dockerfile
    - 이미지를 생성하기 위한 텍스트 파일
    - 애플리케이션에 필요한 라이브러리를 설치하거나 컨테이너 환경 변수를 지정한다.
- 이미지
    - 컨테이너를 실행하기 위해 필요한 빌드된 패키지
- 태그
    - 이미지에 할당한 라벨
    - 이미지 버전 관리 용도
- 레지스트리
    - 이미지를 보관하기 위한 서비스
    - 도커 레지스트리는 여러 개의 레포지토리로 구성되지만 public과 private으로 구분된다.
- 컨테이너
    - 이미지로부터 생성된 실행 주체
    - 애플리케이션 및 의존 라이브러리를 포함한 형태

### 알아둬야 할 기본 도커 조작

- 이미지 생성
    - `docker image build`
    - 애플리케이션 소스 코드와 Dockerfile로 이미지를 만드는 경우
- 이미지 목록 표시
    - `docker image ls`
- 이미지 삭제
    - `docker image rm`
- 이미지 태그 추가
    - `docker image tag`
- 레지스트리에 이미지 업로드
    - `docker image push`
    - 실제 운영 시 push하려면 사전에 저장소에 로그인하고 특정 규칙에 따라 이미지 이름을 붙여야 한다.
- 레지스트리에서 이미지 취득
    - `docker image pull`
- 컨테이너 실행
    - `docker contaner run`
    - 실행한 컨테이너 기동 상태는 `docker container ls`로 확인 가능
- 로그 확인
    - `docker contaner logs`
- 실행 중인 컨테이너에 명령 전달
    - `docker container exec`
- 컨테이너 정지
    - `docker container stop`

### 도커 명령어 체계

- 도커는 버전 1.13부터 `docker [무엇을] [어떻게 한다]` 형식의 명령 체계로 바뀌었다.
    - ex) 이미지 생성을 `docker build`로 하던 것에서 `docker image build`로 바뀌었다.
- 도커사는 새로운 체계 명령을 사용할 것을 추천하고 있다.
    - 업데이트된 내용을 올바르게 쓴다는 의미에서
