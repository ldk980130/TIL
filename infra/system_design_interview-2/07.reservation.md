# 7μ¥ νΈν…” μμ•½ μ‹μ¤ν…
## 1λ‹¨κ³„: λ¬Έμ  μ΄ν•΄ λ° μ„¤κ³„ λ²”μ„ ν™•μ •

- κΈ°λ¥ μ”κµ¬μ‚¬ν•­
    - νΈν…” μ •λ³΄ νμ΄μ§€ ν‘μ‹
    - κ°μ‹¤ μ •λ³΄ νμ΄μ§€ ν‘μ‹
    - κ°μ‹¤ μμ•½/μ·¨μ†
        - λ€κΈμ€ μμ•½ μ‹ μ§€λ¶
        - κ°μ‹¤ κ°€κ²©μ€ μ λ™μ 
    - νΈν…”μ΄λ‚ κ°μ‹¤ μ •λ³΄λ¥Ό μ¶”κ°€/μ‚­μ /κ°±μ‹ ν•λ” κ΄€λ¦¬μ νμ΄μ§€ μ§€μ›
    - μ΄κ³Ό μμ•½ μ§€μ›
        - μΌλ¶€ κ³ κ°μ΄ μμ•½μ„ μ·¨μ†ν•  κ²ƒμ„ μμƒν•μ—¬ 10% μ΄κ³Όμμ•½μ΄ κ°€λ¥ν•΄μ•Ό ν•λ‹¤.
- λΉ„κΈ°λ¥ μ”κµ¬μ‚¬ν•­
    - λ†’μ€ μμ¤€μ λ™μ‹μ„± μ§€μ› (μ„±μκΈ°λ‚ λ€κ·λ¨ μ΄λ²¤νΈ κ³ λ ¤)
    - μ μ ν• μ§€μ—° μ‹κ°„
        - μμ•½ μ‹ μ‘λ‹µ μ†λ„κ°€ λΉ λ¥΄λ©΄ μ΄μƒμ μ΄κ² μ§€λ§ μ”μ²­ μ²λ¦¬μ— λ‡ μ΄ μ •λ„ κ±Έλ¦¬λ” κ²ƒμ€ κ΄μ°®λ‹¤.
- κ³„λµμ  κ·λ¨ μΈ΅μ •
    - 5000κ° νΈν…”, 100λ§ κ° κ°μ‹¤μ„ κ°€μ •
    - ν‰κ· μ μΌλ΅ κ°μ‹¤μ 70%κ°€ μ‚¬μ© μ¤‘μ΄κ³  ν‰κ·  ν¬μ™ κΈ°κ°„μ€ 3μΌμ΄λΌ κ°€μ •
    - μΌμΌ μμ•½ κ±΄μ: `λ°±λ§ * 0.7 / 3 = 233,333`
    - μ΄λ‹Ή μμ•½ κ±΄μ = `240,000 / 10^5μ΄ =~ 3.`
        - TPSλ” κ·Έλ‹¤μ§€ λ†’μ§€ μ•λ‹¤.
- QPS μμΈ΅
    - μμ•½ νμ΄μ§€μ μ‚¬μ© νλ¦„μ—λ” μ„Έ λ‹¨κ³„κ°€ μ΅΄μ¬ν•λ‹¤.
        - νΈν…”/κ°μ‹¤ μƒμ„Έ νμ΄μ§€: μ‚¬μ©μκ°€ μ •λ³΄λ¥Ό ν™•μΈ (μ΅°ν)
        - μμ•½ μƒμ„Έ μ •λ³΄ νμ΄μ§€: μ‚¬μ©μκ°€ λ‚ μ§, ν¬μ™ μΈμ›, κ²°μ  λ“± μƒμ„Έ μ •λ³΄λ¥Ό μμ•½ μ „μ— ν™•μΈ (μ΅°ν)
        - κ°μ‹¤ μμ•½ νμ΄μ§€: μ‚¬μ©μκ°€ κ°μ‹¤μ„ μμ•½ (νΈλμ­μ… λ°μƒ)
    - λ€λµ 10% μ‚¬μ©μκ°€ λ‹¤μ λ‹¨κ³„λ΅ μ§„ν–‰ν•λ‹¤κ³  κ°€μ •ν•μ—¬ λ‹¤μ κ²°κ³Όλ¥Ό μ μ‹
        - κ°μ‹¤ μƒμ„Έ QPS - 300
        - μμ•½ μƒμ„Έ QPS - 30
        - κ°μ‹¤ μμ•½ QOS - 3
## 2λ‹¨κ³„: κ°λµμ  μ„¤κ³„μ• μ μ‹ λ° λ™μ κµ¬ν•κΈ°

### API μ„¤κ³„

- κ°μΆ… μ΅°ν apiμ™€ κ΄€λ¦¬μμ© νΈν…”/κ°μ‹¤ μμ • apiκ°€ λ¬Όλ΅  μμ§€λ§ β€μ‹ κ· μμ•½ μ ‘μβ€™λ§ μ‚΄ν΄λ³΄μ
- POST `/v1/reservations`
    - `reservationID`λ” μ΄μ¤‘ μμ•½ λ°©μ§€λ¥Ό λ³΄μ¥ν•λ” λ©±λ“± ν‚¤λ‹¤.
    - μ΄μ¤‘ μμ•½μ€ κ°™μ€ λ‚  κ°™μ€ κ°μ‹¤μ— μμ•½μ΄ μ¤‘λ³µμΌλ΅ μ΄λ£¨μ–΄μ§€λ” κ²ƒμ„ λ§ν•λ‹¤.

```json
{
	"startDate": "2021-04-28",
	"endDate": "2021-04-30",
	"hotelID": "245",
	"roomID": "U1234546",
	"reservationID": "13422445"
}
```

### λ°μ΄ν„° λ¨λΈ

- νΈν…” μμ•½ μ‹μ¤ν…μ λ°μ΄ν„° μ ‘κ·Ό ν¨ν„΄
    - νΈν…” μƒμ„Έ μ •λ³΄ ν™•μΈ
    - μ§€μ •λ λ‚ μ§ λ²”μ„μ— μ‚¬μ© κ°€λ¥ν• κ°μ‹¤ μ ν• ν™•μΈ
    - μμ•½ μ •λ³΄ κΈ°λ΅
    - μμ•½ λ‚΄μ—­ λλ” κ³Όκ±° μ΄λ ¥ μ •λ³΄ μ΅°ν
- λ³Έ μ„¤κ³„μ•μ—μ„  κ΄€κ³„ν• DBλ¥Ό μ„ νƒν•λ‹¤.
    - κ΄€κ³„ν• DBμ—μ„  μ“°κΈ°λ³΄λ‹¤ μ½κΈ° λΉλ„κ°€ λ†’μ€ μ‘μ—… νλ¦„μ„ μ μ§€μ›ν•λ‹¤.
    - ACID μ§€μ›μ„ ν†µν•΄ μμ•½ κΈ°λ¥μ„ μ μ§€μ›ν•  μ μλ”λ° μ”μ•΅μ΄ λ§μ΄λ„μ¤κ°€ λκ±°λ‚ μ΄μ¤‘ μ²­κµ¬ λ¬Έμ λ¥Ό λ°©μ§€ν•κΈ° μ©μ΄ν•λ‹¤.
    - λΉ„μ¦λ‹μ¤ λ°μ΄ν„° κµ¬μ΅°λ¥Ό λ…ν™•ν ν•κ³  μ‰½κ² λ¨λΈλ§ν•  μ μλ‹¤.

```mermaid
flowchart LR
    %% νΈν…” μ„λΉ„μ¤
    subgraph νΈν…”_μ„λΉ„μ¤["νΈν…” μ„λΉ„μ¤"]
        direction TB
        HOTEL[[HOTEL]]
        ROOM[[ROOM]]
        ROOM -->|μ°Έμ΅°| HOTEL
    end

    %% μ”κΈ μ„λΉ„μ¤
    subgraph μ”κΈ_μ„λΉ„μ¤["μ”κΈ μ„λΉ„μ¤"]
        ROOM_TYPE_RATE[[ROOM_TYPE_RATE]]
    end

    %% ν¬μ™κ° μ„λΉ„μ¤
    subgraph ν¬μ™κ°_μ„λΉ„μ¤["ν¬μ™κ° μ„λΉ„μ¤"]
        GUEST[[GUEST]]
    end

    %% μμ•½ μ„λΉ„μ¤
    subgraph μμ•½_μ„λΉ„μ¤["μμ•½ μ„λΉ„μ¤"]
        RESERVATION[[RESERVATION]]
    end

    %% κ΄€κ³„ μ •μ
    μ”κΈ_μ„λΉ„μ¤ -->|μ°Έμ΅°| νΈν…”_μ„λΉ„μ¤
    μμ•½_μ„λΉ„μ¤ -->|μ°Έμ΅°| νΈν…”_μ„λΉ„μ¤
    μμ•½_μ„λΉ„μ¤ -->|μ°Έμ΅°| ν¬μ™κ°_μ„λΉ„μ¤

```

### κ³„λµμ  μ„¤κ³„μ•

- μ΄ νΈν…” μμ•½ μ‹μ¤ν…μ€ λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²λ¥Ό μ‚¬μ©ν•λ‹¤

```mermaid
flowchart TB
    %% μ‚¬μ©μ λ° κ²μ΄νΈμ›¨μ΄
    μ‚¬μ©μ["π‘¤ μ‚¬μ©μ"] --> κ³µκ°_API_κ²μ΄νΈμ›¨μ΄["π κ³µκ° API κ²μ΄νΈμ›¨μ΄"]
    μ‚¬μ©μ --> CDN["π“¦ CDN"]
    κ΄€λ¦¬μ["π‘¤ κ΄€λ¦¬μ"] --> λ‚΄λ¶€_API["π”’ λ‚΄λ¶€ API κ²μ΄νΈμ›¨μ΄"]

    %% μ„λΉ„μ¤ κ·Έλ£Ή
    subgraph μ„λΉ„μ¤_κ·Έλ£Ή[" "]
        direction TB
        νΈν…”_μ„λΉ„μ¤["π¨ νΈν…” μ„λΉ„μ¤"]
        μ”κΈ_μ„λΉ„μ¤["π’µ μ”κΈ μ„λΉ„μ¤"]
        μμ•½_μ„λΉ„μ¤["π“… μμ•½ μ„λΉ„μ¤"]
        κ²°μ _μ„λΉ„μ¤["π’³ κ²°μ  μ„λΉ„μ¤"]
        λ‚΄λ¶€_API --> νΈν…”_κ΄€λ¦¬_μ„λΉ„μ¤["π› οΈ νΈν…” κ΄€λ¦¬ μ„λΉ„μ¤"]
                
        νΈν…”_DB["π—„οΈ νΈν…” DB"]
		    νΈν…”_μΊμ‹["β΅ νΈν…” μΊμ‹"]
		    μ”κΈ_DB["π—„οΈ μ”κΈ DB"]
		    μμ•½_DB["π—„οΈ μμ•½ DB"]
		    κ²°μ _DB["π—„οΈ κ²°μ  DB"]
		    
		    νΈν…”_μ„λΉ„μ¤ --> νΈν…”_DB
		    νΈν…”_μ„λΉ„μ¤ --> νΈν…”_μΊμ‹
		    μ”κΈ_μ„λΉ„μ¤ --> μ”κΈ_DB
		    μμ•½_μ„λΉ„μ¤ --> μμ•½_DB
		    κ²°μ _μ„λΉ„μ¤ --> κ²°μ _DB
    end
    

    κ³µκ°_API_κ²μ΄νΈμ›¨μ΄ --> νΈν…”_μ„λΉ„μ¤
    κ³µκ°_API_κ²μ΄νΈμ›¨μ΄ --> μ”κΈ_μ„λΉ„μ¤
    κ³µκ°_API_κ²μ΄νΈμ›¨μ΄ --> μμ•½_μ„λΉ„μ¤
    κ³µκ°_API_κ²μ΄νΈμ›¨μ΄ --> κ²°μ _μ„λΉ„μ¤

```

- κ° κµ¬μ„± μ”μ† μ„¤λ…
    - CDN(μ½ν…μΈ  μ „μ†΅ λ„¤νΈμ›ν¬): λ¨λ“  μ •μ  μ»¨ν…μΈ λ¥Ό μΊμ‹ν•μ—¬ μ›Ήμ‚¬μ΄νΈ μ„±λ¥ κ°μ„ μ— μ΄μ©
    - κ³µκ° API κ²μ΄νΈμ›¨μ΄
        - μ²λ¦¬μ¨ μ ν•, μΈμ¦ λ“± κΈ°λ¥μ„ μ§€μ›ν•λ” μ™„μ „ κ΄€λ¦¬ν• μ„λΉ„μ¤
        - μ—”λ“ν¬μΈνΈ κΈ°λ°μΌλ΅ νΉμ • μ„λΉ„μ¤μ— μ”μ²­μ„ μ „λ‹¬
    - λ‚΄λ¶€ API
        - μΉμΈλ κ΄€λ¦¬μλ§ μ‚¬μ© κ°€λ¥
        - VPN λ“±μ κΈ°μ μ„ μ‚¬μ©ν•΄ μ™Έλ¶€ κ³µκ²©μΌλ΅λ¶€ν„° λ³΄νΈν•λ‹¤.
    - νΈν…” μ„λΉ„μ¤
        - νΈν…”κ³Ό κ°μ‹¤μ— λ€ν• μƒμ„Έ μ •λ³΄λ¥Ό μ κ³µ
        - μ •μ μΈ μ •λ³΄λΌ μΊμ‹κ°€ μ©μ΄
    - μ”κΈ μ„λΉ„μ¤
        - μ–΄λ–¤ λ‚ μ— μ–΄λ–¤ μ”κΈμ„ λ°›μ•„μ•Ό ν•λ”μ§€ λ°μ΄ν„°λ¥Ό μ κ³µν•λ” μ„λΉ„μ¤
        - ν•΄λ‹Ή λ‚ μ§μ— μ–Όλ§λ‚ λ§μ€ μ†λ‹μ΄ λ°λ¦¬λλƒμ— λ”°λΌ μ”κΈμ΄ λ‹¬λΌμ§„λ‹¤.
    - μμ•½ μ„λΉ„μ¤
        - μμ•½ μ”μ²­μ„ λ°›κ³  μ²λ¦¬
        - μμ•½/μ·¨μ† μ‹ μ”μ—¬ κ°μ‹¤ μ •λ³΄λ¥Ό κ°±μ‹ 
    - κ²°μ  μ„λΉ„μ¤: κ²°μ λ¥Ό λ§΅μ•„ μ²λ¦¬ν•κ³  κ²°μ  μƒνƒλ¥Ό κ΄€λ¦¬
    - νΈν…” κ΄€λ¦¬ μ„λΉ„μ¤
        - μΉμΈλ κ΄€λ¦¬μλ§ μ‚¬μ© κ°€λ¥
        - μμ•½ κΈ°λ΅ ν™•μΈ, μμ•½/μμ•½ μ·¨μ† λ“± κΈ°λ¥ μ κ³µ
- μ„λΉ„μ¤ κ°„ μ”μ²­
    - μ‹¤μ λ΅  κ° μ„λΉ„μ¤ μ‚¬μ΄μ—λ„ μμ΅΄/μ”μ²­ κ΄€κ³„κ°€ μμ§€λ§ μ„ λ‹¤μ΄μ–΄κ·Έλ¨μ—μ„  μƒλµν–λ‹¤.
    - ex) μμ•½ μ„λΉ„μ¤λ” κ°μ‹¤ μ”κΈ κ³„μ‚°μ„ μ„ν•΄ μ”κΈ μ„λΉ„μ¤μ— μ§μν•΄μ•Ό ν•λ‹¤.
    - ex) νΈν…” κ΄€λ¦¬ μ„λΉ„μ¤μ—μ„ λ³€κ²½λ λ°μ΄ν„°λ” λ€λ¶€λ¶„μ λ‹¤λ¥Έ μ„λΉ„μ¤λ“¤μ΄ ν•΄λ‹Ή λ³€κ²½μ„ λ°μν•΄μ•Ό ν•λ‹¤.
- μ„λΉ„μ¤ κ°„ ν†µμ‹ μ—λ” gRPC κ°™μ€ κ³ μ„±λ¥ μ›κ²© ν”„λ΅μ‹μ € νΈμ¶ ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•κ³¤ ν•λ‹¤.
