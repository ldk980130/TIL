# 7μ¥ νΈν…” μμ•½ μ‹μ¤ν…
## 1λ‹¨κ³„: λ¬Έμ  μ΄ν•΄ λ° μ„¤κ³„ λ²”μ„ ν™•μ •

- κΈ°λ¥ μ”κµ¬μ‚¬ν•­
    - νΈν…” μ •λ³΄ νμ΄μ§€ ν‘μ‹
    - κ°μ‹¤ μ •λ³΄ νμ΄μ§€ ν‘μ‹
    - κ°μ‹¤ μμ•½/μ·¨μ†
        - λ€κΈμ€ μμ•½ μ‹ μ§€λ¶
        - κ°μ‹¤ κ°€κ²©μ€ μ λ™μ 
    - νΈν…”μ΄λ‚ κ°μ‹¤ μ •λ³΄λ¥Ό μ¶”κ°€/μ‚­μ /κ°±μ‹ ν•λ” κ΄€λ¦¬μ νμ΄μ§€ μ§€μ›
    - μ΄κ³Ό μμ•½ μ§€μ›
        - μΌλ¶€ κ³ κ°μ΄ μμ•½μ„ μ·¨μ†ν•  κ²ƒμ„ μμƒν•μ—¬ 10% μ΄κ³Όμμ•½μ΄ κ°€λ¥ν•΄μ•Ό ν•λ‹¤.
- λΉ„κΈ°λ¥ μ”κµ¬μ‚¬ν•­
    - λ†’μ€ μμ¤€μ λ™μ‹μ„± μ§€μ› (μ„±μκΈ°λ‚ λ€κ·λ¨ μ΄λ²¤νΈ κ³ λ ¤)
    - μ μ ν• μ§€μ—° μ‹κ°„
        - μμ•½ μ‹ μ‘λ‹µ μ†λ„κ°€ λΉ λ¥΄λ©΄ μ΄μƒμ μ΄κ² μ§€λ§ μ”μ²­ μ²λ¦¬μ— λ‡ μ΄ μ •λ„ κ±Έλ¦¬λ” κ²ƒμ€ κ΄μ°®λ‹¤.
- κ³„λµμ  κ·λ¨ μΈ΅μ •
    - 5000κ° νΈν…”, 100λ§ κ° κ°μ‹¤μ„ κ°€μ •
    - ν‰κ· μ μΌλ΅ κ°μ‹¤μ 70%κ°€ μ‚¬μ© μ¤‘μ΄κ³  ν‰κ·  ν¬μ™ κΈ°κ°„μ€ 3μΌμ΄λΌ κ°€μ •
    - μΌμΌ μμ•½ κ±΄μ: `λ°±λ§ * 0.7 / 3 = 233,333`
    - μ΄λ‹Ή μμ•½ κ±΄μ = `240,000 / 10^5μ΄ =~ 3.`
        - TPSλ” κ·Έλ‹¤μ§€ λ†’μ§€ μ•λ‹¤.
- QPS μμΈ΅
    - μμ•½ νμ΄μ§€μ μ‚¬μ© νλ¦„μ—λ” μ„Έ λ‹¨κ³„κ°€ μ΅΄μ¬ν•λ‹¤.
        - νΈν…”/κ°μ‹¤ μƒμ„Έ νμ΄μ§€: μ‚¬μ©μκ°€ μ •λ³΄λ¥Ό ν™•μΈ (μ΅°ν)
        - μμ•½ μƒμ„Έ μ •λ³΄ νμ΄μ§€: μ‚¬μ©μκ°€ λ‚ μ§, ν¬μ™ μΈμ›, κ²°μ  λ“± μƒμ„Έ μ •λ³΄λ¥Ό μμ•½ μ „μ— ν™•μΈ (μ΅°ν)
        - κ°μ‹¤ μμ•½ νμ΄μ§€: μ‚¬μ©μκ°€ κ°μ‹¤μ„ μμ•½ (νΈλμ­μ… λ°μƒ)
    - λ€λµ 10% μ‚¬μ©μκ°€ λ‹¤μ λ‹¨κ³„λ΅ μ§„ν–‰ν•λ‹¤κ³  κ°€μ •ν•μ—¬ λ‹¤μ κ²°κ³Όλ¥Ό μ μ‹
        - κ°μ‹¤ μƒμ„Έ QPS - 300
        - μμ•½ μƒμ„Έ QPS - 30
        - κ°μ‹¤ μμ•½ QOS - 3
## 2λ‹¨κ³„: κ°λµμ  μ„¤κ³„μ• μ μ‹ λ° λ™μ κµ¬ν•κΈ°

### API μ„¤κ³„

- κ°μΆ… μ΅°ν apiμ™€ κ΄€λ¦¬μμ© νΈν…”/κ°μ‹¤ μμ • apiκ°€ λ¬Όλ΅  μμ§€λ§ β€μ‹ κ· μμ•½ μ ‘μβ€™λ§ μ‚΄ν΄λ³΄μ
- POST `/v1/reservations`
    - `reservationID`λ” μ΄μ¤‘ μμ•½ λ°©μ§€λ¥Ό λ³΄μ¥ν•λ” λ©±λ“± ν‚¤λ‹¤.
    - μ΄μ¤‘ μμ•½μ€ κ°™μ€ λ‚  κ°™μ€ κ°μ‹¤μ— μμ•½μ΄ μ¤‘λ³µμΌλ΅ μ΄λ£¨μ–΄μ§€λ” κ²ƒμ„ λ§ν•λ‹¤.

```json
{
	"startDate": "2021-04-28",
	"endDate": "2021-04-30",
	"hotelID": "245",
	"roomID": "U1234546",
	"reservationID": "13422445"
}
```

### λ°μ΄ν„° λ¨λΈ

- νΈν…” μμ•½ μ‹μ¤ν…μ λ°μ΄ν„° μ ‘κ·Ό ν¨ν„΄
    - νΈν…” μƒμ„Έ μ •λ³΄ ν™•μΈ
    - μ§€μ •λ λ‚ μ§ λ²”μ„μ— μ‚¬μ© κ°€λ¥ν• κ°μ‹¤ μ ν• ν™•μΈ
    - μμ•½ μ •λ³΄ κΈ°λ΅
    - μμ•½ λ‚΄μ—­ λλ” κ³Όκ±° μ΄λ ¥ μ •λ³΄ μ΅°ν
- λ³Έ μ„¤κ³„μ•μ—μ„  κ΄€κ³„ν• DBλ¥Ό μ„ νƒν•λ‹¤.
    - κ΄€κ³„ν• DBμ—μ„  μ“°κΈ°λ³΄λ‹¤ μ½κΈ° λΉλ„κ°€ λ†’μ€ μ‘μ—… νλ¦„μ„ μ μ§€μ›ν•λ‹¤.
    - ACID μ§€μ›μ„ ν†µν•΄ μμ•½ κΈ°λ¥μ„ μ μ§€μ›ν•  μ μλ”λ° μ”μ•΅μ΄ λ§μ΄λ„μ¤κ°€ λκ±°λ‚ μ΄μ¤‘ μ²­κµ¬ λ¬Έμ λ¥Ό λ°©μ§€ν•κΈ° μ©μ΄ν•λ‹¤.
    - λΉ„μ¦λ‹μ¤ λ°μ΄ν„° κµ¬μ΅°λ¥Ό λ…ν™•ν ν•κ³  μ‰½κ² λ¨λΈλ§ν•  μ μλ‹¤.

```mermaid
flowchart LR
    %% νΈν…” μ„λΉ„μ¤
    subgraph νΈν…”_μ„λΉ„μ¤["νΈν…” μ„λΉ„μ¤"]
        direction TB
        HOTEL[[HOTEL]]
        ROOM[[ROOM]]
        ROOM -->|μ°Έμ΅°| HOTEL
    end

    %% μ”κΈ μ„λΉ„μ¤
    subgraph μ”κΈ_μ„λΉ„μ¤["μ”κΈ μ„λΉ„μ¤"]
        ROOM_TYPE_RATE[[ROOM_TYPE_RATE]]
    end

    %% ν¬μ™κ° μ„λΉ„μ¤
    subgraph ν¬μ™κ°_μ„λΉ„μ¤["ν¬μ™κ° μ„λΉ„μ¤"]
        GUEST[[GUEST]]
    end

    %% μμ•½ μ„λΉ„μ¤
    subgraph μμ•½_μ„λΉ„μ¤["μμ•½ μ„λΉ„μ¤"]
        RESERVATION[[RESERVATION]]
    end

    %% κ΄€κ³„ μ •μ
    μ”κΈ_μ„λΉ„μ¤ -->|μ°Έμ΅°| νΈν…”_μ„λΉ„μ¤
    μμ•½_μ„λΉ„μ¤ -->|μ°Έμ΅°| νΈν…”_μ„λΉ„μ¤
    μμ•½_μ„λΉ„μ¤ -->|μ°Έμ΅°| ν¬μ™κ°_μ„λΉ„μ¤

```

### κ³„λµμ  μ„¤κ³„μ•

- μ΄ νΈν…” μμ•½ μ‹μ¤ν…μ€ λ§μ΄ν¬λ΅μ„λΉ„μ¤ μ•„ν‚¤ν…μ²λ¥Ό μ‚¬μ©ν•λ‹¤

```mermaid
flowchart TB
    %% μ‚¬μ©μ λ° κ²μ΄νΈμ›¨μ΄
    μ‚¬μ©μ["π‘¤ μ‚¬μ©μ"] --> κ³µκ°_API_κ²μ΄νΈμ›¨μ΄["π κ³µκ° API κ²μ΄νΈμ›¨μ΄"]
    μ‚¬μ©μ --> CDN["π“¦ CDN"]
    κ΄€λ¦¬μ["π‘¤ κ΄€λ¦¬μ"] --> λ‚΄λ¶€_API["π”’ λ‚΄λ¶€ API κ²μ΄νΈμ›¨μ΄"]

    %% μ„λΉ„μ¤ κ·Έλ£Ή
    subgraph μ„λΉ„μ¤_κ·Έλ£Ή[" "]
        direction TB
        νΈν…”_μ„λΉ„μ¤["π¨ νΈν…” μ„λΉ„μ¤"]
        μ”κΈ_μ„λΉ„μ¤["π’µ μ”κΈ μ„λΉ„μ¤"]
        μμ•½_μ„λΉ„μ¤["π“… μμ•½ μ„λΉ„μ¤"]
        κ²°μ _μ„λΉ„μ¤["π’³ κ²°μ  μ„λΉ„μ¤"]
        λ‚΄λ¶€_API --> νΈν…”_κ΄€λ¦¬_μ„λΉ„μ¤["π› οΈ νΈν…” κ΄€λ¦¬ μ„λΉ„μ¤"]
                
        νΈν…”_DB["π—„οΈ νΈν…” DB"]
		    νΈν…”_μΊμ‹["β΅ νΈν…” μΊμ‹"]
		    μ”κΈ_DB["π—„οΈ μ”κΈ DB"]
		    μμ•½_DB["π—„οΈ μμ•½ DB"]
		    κ²°μ _DB["π—„οΈ κ²°μ  DB"]
		    
		    νΈν…”_μ„λΉ„μ¤ --> νΈν…”_DB
		    νΈν…”_μ„λΉ„μ¤ --> νΈν…”_μΊμ‹
		    μ”κΈ_μ„λΉ„μ¤ --> μ”κΈ_DB
		    μμ•½_μ„λΉ„μ¤ --> μμ•½_DB
		    κ²°μ _μ„λΉ„μ¤ --> κ²°μ _DB
    end
    

    κ³µκ°_API_κ²μ΄νΈμ›¨μ΄ --> νΈν…”_μ„λΉ„μ¤
    κ³µκ°_API_κ²μ΄νΈμ›¨μ΄ --> μ”κΈ_μ„λΉ„μ¤
    κ³µκ°_API_κ²μ΄νΈμ›¨μ΄ --> μμ•½_μ„λΉ„μ¤
    κ³µκ°_API_κ²μ΄νΈμ›¨μ΄ --> κ²°μ _μ„λΉ„μ¤

```

- κ° κµ¬μ„± μ”μ† μ„¤λ…
    - CDN(μ½ν…μΈ  μ „μ†΅ λ„¤νΈμ›ν¬): λ¨λ“  μ •μ  μ»¨ν…μΈ λ¥Ό μΊμ‹ν•μ—¬ μ›Ήμ‚¬μ΄νΈ μ„±λ¥ κ°μ„ μ— μ΄μ©
    - κ³µκ° API κ²μ΄νΈμ›¨μ΄
        - μ²λ¦¬μ¨ μ ν•, μΈμ¦ λ“± κΈ°λ¥μ„ μ§€μ›ν•λ” μ™„μ „ κ΄€λ¦¬ν• μ„λΉ„μ¤
        - μ—”λ“ν¬μΈνΈ κΈ°λ°μΌλ΅ νΉμ • μ„λΉ„μ¤μ— μ”μ²­μ„ μ „λ‹¬
    - λ‚΄λ¶€ API
        - μΉμΈλ κ΄€λ¦¬μλ§ μ‚¬μ© κ°€λ¥
        - VPN λ“±μ κΈ°μ μ„ μ‚¬μ©ν•΄ μ™Έλ¶€ κ³µκ²©μΌλ΅λ¶€ν„° λ³΄νΈν•λ‹¤.
    - νΈν…” μ„λΉ„μ¤
        - νΈν…”κ³Ό κ°μ‹¤μ— λ€ν• μƒμ„Έ μ •λ³΄λ¥Ό μ κ³µ
        - μ •μ μΈ μ •λ³΄λΌ μΊμ‹κ°€ μ©μ΄
    - μ”κΈ μ„λΉ„μ¤
        - μ–΄λ–¤ λ‚ μ— μ–΄λ–¤ μ”κΈμ„ λ°›μ•„μ•Ό ν•λ”μ§€ λ°μ΄ν„°λ¥Ό μ κ³µν•λ” μ„λΉ„μ¤
        - ν•΄λ‹Ή λ‚ μ§μ— μ–Όλ§λ‚ λ§μ€ μ†λ‹μ΄ λ°λ¦¬λλƒμ— λ”°λΌ μ”κΈμ΄ λ‹¬λΌμ§„λ‹¤.
    - μμ•½ μ„λΉ„μ¤
        - μμ•½ μ”μ²­μ„ λ°›κ³  μ²λ¦¬
        - μμ•½/μ·¨μ† μ‹ μ”μ—¬ κ°μ‹¤ μ •λ³΄λ¥Ό κ°±μ‹ 
    - κ²°μ  μ„λΉ„μ¤: κ²°μ λ¥Ό λ§΅μ•„ μ²λ¦¬ν•κ³  κ²°μ  μƒνƒλ¥Ό κ΄€λ¦¬
    - νΈν…” κ΄€λ¦¬ μ„λΉ„μ¤
        - μΉμΈλ κ΄€λ¦¬μλ§ μ‚¬μ© κ°€λ¥
        - μμ•½ κΈ°λ΅ ν™•μΈ, μμ•½/μμ•½ μ·¨μ† λ“± κΈ°λ¥ μ κ³µ
- μ„λΉ„μ¤ κ°„ μ”μ²­
    - μ‹¤μ λ΅  κ° μ„λΉ„μ¤ μ‚¬μ΄μ—λ„ μμ΅΄/μ”μ²­ κ΄€κ³„κ°€ μμ§€λ§ μ„ λ‹¤μ΄μ–΄κ·Έλ¨μ—μ„  μƒλµν–λ‹¤.
    - ex) μμ•½ μ„λΉ„μ¤λ” κ°μ‹¤ μ”κΈ κ³„μ‚°μ„ μ„ν•΄ μ”κΈ μ„λΉ„μ¤μ— μ§μν•΄μ•Ό ν•λ‹¤.
    - ex) νΈν…” κ΄€λ¦¬ μ„λΉ„μ¤μ—μ„ λ³€κ²½λ λ°μ΄ν„°λ” λ€λ¶€λ¶„μ λ‹¤λ¥Έ μ„λΉ„μ¤λ“¤μ΄ ν•΄λ‹Ή λ³€κ²½μ„ λ°μν•΄μ•Ό ν•λ‹¤.
- μ„λΉ„μ¤ κ°„ ν†µμ‹ μ—λ” gRPC κ°™μ€ κ³ μ„±λ¥ μ›κ²© ν”„λ΅μ‹μ € νΈμ¶ ν”„λ μ„μ›ν¬λ¥Ό μ‚¬μ©ν•κ³¤ ν•λ‹¤.

## 3λ‹¨κ³„: μƒμ„Έ μ„¤κ³„

### λ™μ‹μ„± λ¬Έμ 

- μμ•½ μ‹μ¤ν…μ—μ„  μ΄μ¤‘ μμ•½μ„ λ°©μ§€ν•΄μ•Ό ν•λ‹¤.
    - κ°™μ€ μ‚¬μ©μκ°€ μμ•½ λ²„νΌμ„ μ—¬λ¬ λ² λ„λ¥Ό μ μλ‹¤.
    - μ—¬λ¬ μ‚¬μ©μκ°€ κ°™μ€ κ°μ‹¤μ„ λ™μ‹μ— μμ•½ν•λ¬ ν•  μ μλ‹¤.
- κ°™μ€ μ‚¬μ©μκ°€ μμ•½ λ²„νΌμ„ μ—¬λ¬λ² λ„λ¥΄λ” κ²½μ°
    - ν΄λΌμ΄μ–ΈνΈ μΈ΅ κµ¬ν„
        - ν΄λΌμ΄μ–ΈνΈ μ”μ²­ ν›„ β€μμ•½β€™ λ²„νΌμ„ disable μ²λ¦¬ν•μ—¬ μ΄μ¤‘ ν΄λ¦­ λ°©μ§€
        - ν•μ§€λ§ μ•μ •μ μΈ λ°©λ²•μ€ μ•„λ‹λ‹¤.
    - λ©±λ“± API
        - μμ•½ API μ”μ²­μ— λ©±λ“±ν‚¤λ¥Ό μ¶”κ°€ν•λ” λ°©μ•
        - λ³Έ μ„¤κ³„μ•μ—μ„  reservation_idλ¥Ό λ©±λ“± ν‚¤λ΅ μ‚¬μ©ν•΄ μ΄μ¤‘ μμ•½ λ¬Έμ λ¥Ό ν•΄κ²°ν•λ‹¤.
    - λ©±λ“±ν‚¤μ™€ RDBμ μ μΌμ„± μ μ•½ μ΅°κ±΄μ„ μ΄μ©ν•΄ μ΄μ¤‘ ν΄λ¦­μ„ λ°©μ§€ν•λ‹¤.
- μ—¬λ¬ μ‚¬μ©μκ°€ κ°™μ€ κ°μ‹¤μ„ μμ•½ν•λ¬ ν•λ” κ²½μ°
    - κ²©λ¦¬ μμ¤€μ΄ repeatable readμΈ κ²½μ° μ—¬λ¬ νΈλμ­μ…μ΄ 1μλ¦¬ λ‚¨μ€ κ°μ‹¤μ„ μμ•½ κ°€λ¥ν• κ°μ‹¤μ΄λΌ νλ‹¨ν•κ³  μμ•½ν•μ—¬ μ΄μ¤‘ μμ•½μ΄ λ°μƒν•λ‹¤.
    - λ°©μ• 1: λΉ„κ΄€μ  λ½
        - μ‚¬μ©μκ°€ λ μ½”λ“λ¥Ό κ°±μ‹ ν•λ ¤λ” μκ°„ μ¦‰μ‹ λ½μ„ κ±Έμ–΄ λ™μ‹ μ—…λ°μ΄νΈλ¥Ό λ°©μ§€ν•λ” κΈ°μ 
        - κµ¬ν„μ΄ μ‰½κ³  λ°μ΄ν„° κ²½ν•©μ΄ μ‹¬ν•  λ• μ μ©ν•λ‹¤.
        - λ‹¤λ§ μ—¬λ¬ λ μ½”λ“μ— λ½μ„ κ±Έλ©΄μ„ λ°λ“λ½μ΄ λ°μƒν•  μ μκ³  ν™•μ¥μ„±κ³Ό μ„±λ¥μ— μ•…μν–¥μ„ λ―ΈμΉλ‹¤.
    - λ°©μ• 2: λ‚™κ΄€μ  λ½
        - μ—¬λ¬ μ‚¬μ©μκ°€ λ™μ‹μ— μμ›μ„ κ°±μ‹ ν•λ” κ²ƒμ„ ν—μ©ν•μ§€λ§ λ²„μ €λ‹μ„ ν†µν•΄ λ™μ‹ μ—…λ°μ΄νΈλ¥Ό λ°©μ§€ν•λ‹¤.
        - μΌλ°μ μΌλ΅ λΉ„κ΄€μ  λ½λ³΄λ‹¤ λΉ λ¥΄μ§€λ§ λ™μ‹μ„± μμ¤€μ΄ μ•„μ£Ό λ†’μΌλ©΄ μ„±λ¥μ΄ κΈ‰κ²©ν λ‚λΉ μ§„λ‹¤.
        - λ‚™κ΄€μ  μμ™Έκ°€ λ°μƒν•λ©΄ λ‹¤μ‹ μμ•½μ„ μ‹λ„ν•΄μ•Ό ν•μ§€λ§ λ§¤λ² μ„±κ³µν•λ” ν΄λΌμ΄μ–ΈνΈλ” ν•λ‚μ΄κΈ° λ•λ¬Έμ— λ‚λ¨Έμ§€λ” λ‹¤μ‹ μ‹λ„ν•΄μ•Ό ν•λ‹¤.
        - λ”°λΌμ„ λ‚™κ΄€μ  λ½μ€ κ²½μμ΄ μΉμ—΄ν•μ§€ μ•μ€ μƒν™©μ— μ ν•©ν•λ‹¤.
        - μμ•½ QPSκ°€ λ†’μ§€ μ•μ€ λ³Έ μ„¤κ³„μ•μ—μ„  λ‚™κ΄€μ  λ½μ΄ μ ν•©ν• μ„ νƒμ§€λ‹¤.
    - λ°©μ• 3: λ°μ΄ν„°λ² μ΄μ¤ μ μ•½ μ΅°κ±΄
        - `CONSTRAINT β€check_room_countβ€™ CHECK((β€™total_inventory - total_reservedβ€™ β‰¥ 0))`
        - κ°μ‹¤ μμ•½ μ‹ μ μ•½ μ΅°κ±΄μ„ μ„λ°ν•λ©΄ νΈλμ­μ…μ€ μ¤‘λ‹¨λκ³  λ΅¤λ°±λλ‹¤.
        - κµ¬ν„μ΄ μ‰½κ³  λ°μ΄ν„°μ— λ€ν• κ²½μμ΄ μ‹¬ν•μ§€ μ•μ„ λ• μ λ™μ‘ν•λ‹¤.
        - ν•μ§€λ§ λ‚™κ΄€μ  λ½κ³Ό λ§μ°¬κ°€μ§€λ΅ κ²½μμ΄ μ‹¬ν•λ©΄ μ—°μ‚° μ‹¤ν¨ μκ°€ μ—„μ²­ λμ–΄λ‚κ² λλ‹¤.
        - λ°μ΄ν„°λ² μ΄μ¤ μ μ•½ μ΅°κ±΄μ€ μ• ν”λ¦¬μΌ€μ΄μ… μ½”λ“μ™€ λ‹¬λΌ λ²„μ „μ„ ν†µμ ν•κΈ° μ–΄λ µλ‹¤.
        - μ μ•½ μ΅°κ±΄μ΄ μ—†λ” λ°μ΄ν„°λ² μ΄μ¤λ„ μμΌλ―€λ΅ DB κµμ²΄ μ‹ λ¬Έμ κ°€ μƒκΈΈ μλ„ μλ‹¤.

### λ°μ΄ν„°λ² μ΄μ¤ μƒ¤λ”©

- QPSκ°€ μ—„μ²­ λ†’μ•„μ§„λ‹¤λ©΄ μ–΄λ–»κ² ν•΄μ•„ν• κΉ
    - λ¬΄μƒνƒ μ„λ²„λ” μ¤μΌ€μΌ μ•„μ›ƒμ„ ν•λ©΄ λλ‹¤.
    - ν•μ§€λ§ μƒνƒκ°€ μ €μ¥λλ” λ°μ΄ν„°λ² μ΄μ¤λ” λ‹¨μν μ„λ²„λ¥Ό λλ¦¬λ” κ²ƒλ§μΌλ΅  ν•΄κ²°ν•  μ μ—†λ‹¤.
- λ°μ΄ν„°λ² μ΄μ¤ μƒ¤λ”©
    - λ°μ΄ν„°λ² μ΄μ¤λ¥Ό μ—¬λ¬ λ€ λ‘κ³  κ°κ° λ°μ΄ν„°μ μΌλ¶€λ§ λ³΄κ΄€ν•λ” λ°©μ‹
    - λ³Έ μ„¤κ³„μ•μ—μ„  hotel_idλ¥Ό μƒ¤λ“ ν‚¤λ΅ ν™μ©ν•  μ μλ‹¤.
    - QPSλ¥Ό 30,000μ΄λΌ κ°€μ •ν–μ„ λ• MySQL μ„λ²„κ°€ 16λ€λ©΄ 1λ€μ—μ„ 1875QPSλ¥Ό κ°λ‹Ήν•κ² λλ”λ° μ΄λ” μ¶©λ¶„ν κ°λ‹Ή κ°€λ¥ν• νΈλν”½μ΄λ‹¤.

### μΊμ‹

- νΈν…” μ”μ—¬ κ°μ‹¤ λ°μ΄ν„°λ” ν„μ¬μ™€ λ―Έλ λ°μ΄ν„°λ§μ΄ μ¤‘μ”ν•κΈ°μ— TTLμ„ μ„¤μ •ν•  μ μλ‹¤λ©΄ μΆ‹λ‹¤.
- λ λ””μ¤λ¥Ό ν™μ©ν•λ©΄ TTLκ³Ό LRU(Least Recently Used) μΊμ‹ κµμ²΄ μ •μ±…μ„ ν†µν•΄ λ©”λ¨λ¦¬λ¥Ό μµμ μΌλ΅ ν™μ© κ°€λ¥ν•λ‹¤.
- λ°μ΄ν„° λ΅λ”© μ†λ„μ™€ ν™•μ¥μ„±μ— λ¬Έμ κ°€ μƒκΈ΄λ‹¤λ©΄ DB μ•μ— μΊμ‹ κ³„μΈµμ„ λ‘μ–΄ κ°μ‹¤ ν™•μΈ λ° μμ•½ λ΅μ§μ„ μΊμ‹ κ³„μΈµμ—μ„ μ‹¤ν–‰ν•λ„λ΅ ν•  μ μλ‹¤.
- λ‹¤λ§ μ”μ—¬ κ°μ‹¤ μμ— λ€ν• μµμΆ…μ  μ§„μ‹¤μ€ κ²°κµ­μ—” DBμ— μκΈ°μ— λ‹¤μ‹ λ‹¤μ‹ ν• λ² ν™•μΈν•  ν•„μ”λ” μλ‹¤.
- κ° μ‹μ¤ν… μ»΄ν¬λ„νΈλ” λ‹¤μκ³Ό κ°™λ‹¤.
    - μμ•½ μ„λΉ„μ¤
        - μ§€μ •λ νΈν…”κ³Ό κ°μ‹¤ μ ν•μ„ μ§μ
        - κ°μ‹¤μ„ μμ•½ν•κ³  total_reserved κ°’μ„ 1 μ¦κ°€
        - μμ•½μ΄ μ·¨μ†λλ©΄ μ”μ—¬ κ°μ‹¤ μλ¥Ό κ°±μ‹ 
    - μ”μ—¬ κ°μ‹¤ μΊμ‹
        - λ¨λ“  μ”μ—¬ κ°μ‹¤ κ΄€λ¦¬μ— ν•„μ”ν• μ§μλ” λ λ””μ¤λ΅ κµ¬ν„λλ” μΊμ‹λ΅ μ®κΈ΄λ‹¤.
        - ν‚¤: `hotelID_roomTypeID_{λ‚ μ§},` κ°’: νΈν…” ID, κ°μ‹¤ μ ν• ID, μ”μ—¬ κ°μ‹¤ μ
        - νΈν…” μμ•½ μ‹μ¤ν…μ€ μ½κΈ° μ—°μ‚° λΉλ„κ°€ μ“°κΈ°λ³΄λ‹¤ ν›¨μ”¬ λ§κΈ°μ— λ””λ¶€λ¶„μ μ½κΈ° μ—°μ‚°μ€ μΊμ‹κ°€ μ²λ¦¬ν•λ‹¤.
    - μ”μ—¬ κ°μ‹¤ λ°μ΄ν„° λ² μ΄μ¤
        - κ°μ‹¤ μμ— λ€ν• κ°€μ¥ λ―Ώμ„ λ§ν• μ •λ³΄κ°€ λ³΄κ΄€λλ” μ¥μ†

### μΊμ‹μ™€ λ°μ΄ν„°λ² μ΄μ¤ μ‚¬μ΄μ λ°μ΄ν„° μΌκ΄€μ„±

- μΊμ‹ κ³„μΈµμ„ μ¶”κ°€ν•λ©΄ ν™•μ¥μ„±κ³Ό μ²λ¦¬λ‰μ€ μƒμΉν•μ§€λ§ DBμ™€ μΊμ‹μ μΌκ΄€μ„± μ μ§€λ¥Ό μ‹ κ²½ μ¨μ•Ό ν•λ‹¤.
- μ‚¬μ©μκ°€ κ°μ‹¤μ„ μμ•½ν•  λ• λ‹¤μ λ‘ κ°€μ§€ μ‘μ—…μ΄ μ΄λ£¨μ–΄μ§„λ‹¤.
    - μΊμ‹μ—μ„ μ”μ—¬ κ°μ‹¤ μλ¥Ό μ§μν•μ—¬ μ¶©λ¶„ν•μ§€ ν™•μΈν•λ‹¤.
    - μ”μ—¬ κ°μ‹¤ λ°μ΄ν„°λ¥Ό κ°±μ‹ ν•λ‹¤.
        - λ°μ΄ν„°λ² μ΄μ¤κ°€ λ¨Όμ € κ°±μ‹ λκ³  μΊμ‹κ°€ κ·Έ ν›„ κ°±μ‹ λλ‹¤.
        - λ³€κ²½ λ°μ΄ν„° κ°μ§€ (CDC) λ©”μ»¤λ‹μ¦μ„ μ‚¬μ©ν•  μλ„ μλ‹¤.
- DBμ— λ¨Όμ € λ°μ΄ν„°λ¥Ό μ—…λ°μ΄νΈν•κΈ°μ— μΊμ‹μ—λ” μµμ‹  λ°μ΄ν„°κ°€ μ—†μ„ κ°€λ¥μ„±μ΄ μλ‹¤.
- λ‹¤λ§ μ΄λ° λ¶μΌμΉλ” λ°μ΄ν„°λ² μ΄μ¤κ°€ μµμΆ…μ μΌλ΅ μ”μ—¬ κ°μ‹¤μ„ ν™•μΈν•λ„λ΅ ν•λ©΄ λ¬Έμ λμ§€ μ•λ”λ‹¤.
    - μΊμ‹ μ§μ κ²°κ³Ό μ”μ—¬ κ°μ‹¤μ΄ μμ§€λ§ λ°μ΄ν„°λ² μ΄μ¤μ—λ” μ”μ—¬ κ°μ‹¤μ΄ μ—†λ” κ²½μ° μ‚¬μ©μλ” μμ•½μ„ μ‹λ„ν•λ‹¤.
    - ν•΄λ‹Ή μ”μ²­μ΄ λ°μ΄ν„°λ² μ΄μ¤μ— λ„λ‹¬ν•λ©΄ μ ν¨μ„± κ²€μ‚¬κ°€ μν–‰λκ³  λ‚¨μ€ κ°μ‹¤μ΄ μ—†μμ΄ ν™•μΈλλ‹¤.
    - κ²°κ³Όμ μΌλ΅ ν΄λΌμ΄μ–ΈνΈλ” λ‚¨μ€ κ°μ‹¤μ΄ μ—†λ‹¤λ” κ²°κ³Όλ¥Ό λ°ν™ν•  μ μλ‹¤.
- μ¥μ 
    - μ½κΈ° μ§μλ¥Ό μΊμ‹κ°€ μ²λ¦¬ν•κΈ°μ— DB λ¶€ν•κ°€ ν¬κ² μ¤„μ–΄λ“ λ‹¤.
    - μ½κΈ° μ§μλ¥Ό λ©”λ¨λ¦¬μ—μ„ μ‹¤ν–‰ν•λ―€λ΅ λ†’μ€ μ„±λ¥μ„ λ³΄μ¥ν•λ‹¤.
- λ‹¨μ 
    - λ°μ΄ν„°λ² μ΄μ¤μ™€ μΊμ‹ μ‚¬μ΄ λ°μ΄ν„° μΌκ΄€μ„± μ μ§€κ°€ κΉλ‹¤λ΅­λ‹¤.
