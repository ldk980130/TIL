# Chapter1 도메인 모델 시작하기

## 1.1 도메인이란?

- 온라인 서점을 구현해야할 소프트웨어 대상으로 바라보면 다음의 기능을 제공해야 한다.
    - 상품 조회
    - 상품 구매
    - 상품 결제
    - 상품 배송 추적
    - etc…
- 온라인 서점은 소프트웨어로 해결하고자 하는 문제 영역, 즉 **도메인**(domain)에 해당한다.
- 한 도메인은 다시 하위 도메인으로 나눌 수 있다.
    - 한 하위 도메인은 다른 도메인과 연동하여 완전한 기능을 제공한다.
    - 하위 도메인을 어떻게 구성할지 여부는 상황에 따라 달라진다.
- 특정 도메인을 소프트웨어가 모두 제공하는 것은 아니다.
    - 배송 도메인의 경우 외부 배송 업체 시스템을 이용하는 경우가 많다.
    - 결제 시스템도 대행 업체를 이용하는 경우가 많다.

## 1.2 도메인 전문가와 개발자 간 지식 공유

- 코딩에 앞서 요구사항을 올바르게 이해하는 것이 중요하다.
- 개발자와 전문가가 직접 대화하면 요구사항을 비교적 올바르게 이해할 수 있다.
- 개발자도 어느정도 도메인 지식을 갖춰야 한다.
- 도메인 전문가, 관계자, 개발자가 같은 지식을 공유하고 직접 소통할수록 원하는 제품을 만들 가능성이 높아진다.

## 1.3 도메인 모델

- 다양한 의미가 있지만 기본적으로 도메인 모델은 특정 도메인을 개념적으로 표현한 것이다.
    - 객체를 이용해 모델링할 수도 있고 상태 다이어그램을 통해 모델링할 수도 있다.
    - 그래프를 이용할 수도 있고 계산 규칙이 중요하다면 수학 공식을 활용할 수도 있다.
- 도메인을 이해하는 데 도움이 된다면 표현 방식은 중요하지 않다.

> **하위 도메인과 모델**
> 
> 도메인은 다수의 하위 도메인으로 구성되고, **각 도메인이 다루는 영역은 서로 다르기에, 같은 용어라도 의미가 달라질 수 있다**. **** 카탈로그 도메인의 ‘상품’은 가격, 내용 등을 담지만 배송 도메인의 ‘상품’은 실제 배송되는 물리적인 상품을 의미한다. 모델의 각 요소는 특정 도메인으로 한정할 때 의미가 완전해지기 때문에 **각 하위 도메인마다 별도로 모델을 만들어야 한다.**
>

## 1.4 도메인 모델 패턴

일반적인 애플리케이션 아키텍처는 다음과 같이 네 개의 영역으로 구성된다.

| 영역 | 설멍 |
| --- | --- |
| 사용자 인터페이스 또는 표현(Presentation) | 사용자의 요청을 처리하고 사용자에게 정보를 보여준다. 사용자는 사람 뿐 아니라 외부 시스템일 수도 있다. |
| 응용(Application) | 사용자가 요청한 기능을 실행한다. 업무 로직을 직접 구현하지 않으며 도메인 계층을 조합해서 기능을 실행한다. |
| 도메인 | 시스템이 제공할 도메인 규칙을 구현 |
| 인프라스트럭처(infrastrcture) | 데이터베이스나 메시징 시스템 같은 외부 시스템과의 연동을 처리한다. |

### 도메인 계층

- 도메인 계층은 도메인의 핵심 규칙을 구현한다.
- 업무 규칙을 도메인 모델에 위치시켜야 규칙을 바꾸거나 확장할 때 다른 코드에 영향을 덜 주고 모델에 반영할 수 있게 된다.

> **도메인 모델**이란 용어는 도메인 자체를 표현하는 개념적인 모델을 의미하지만, 도메인 계층을 구현할 때 사용하는 객체 모델에도 **도메인 모델**이란 용어를 사용한다.
>

> **개념 모델과 구현 모델**
> 
> **개념 모델**은 순수하게 문제를 분석한 결과물로 DB, 성능, 기술을 고려하지 않는다. 그래서 개념 모델을 구현 가능한 모델로 전환하는 과정을 거치게 된다. **처음부터 완벽한 개념 모델을 만드는 것은 거의 불가능**하다. 이는 프로젝트를 진행하면서 해당 도메인을 더 잘 이해하게 되고 다른 의미로 해석하는 경우도 발생하기 때문이다. 그래서 전반적인 개요를 알 수 있는 수준으로 개념 모델을 작성해야 한다. 구현하는 과정에서 개념 모델을 구현 모델로 점진적으로 발전시켜 나가야 한다.
>